{"ast":null,"code":"import { blackboard } from '../core/Blackboard';\n\n/**\n * ==================================================================================\n * SHAM ARCHITECT SYS - AESTHETIC GEN\n * ==================================================================================\n */\n\nconst LOG = msg => console.log(`[Architect Core] ${msg}`);\n\n// 1. KNOWLEDGE BASE\n_c = LOG;\nconst ROOM_SPECS = {\n  'living': {\n    weight: 2.2\n  },\n  'dining': {\n    weight: 1.4\n  },\n  'garage': {\n    weight: 2.0\n  },\n  'kitchen': {\n    weight: 1.5\n  },\n  'master-bed': {\n    weight: 1.8\n  },\n  'bedroom': {\n    weight: 1.3\n  },\n  'study': {\n    weight: 1.0\n  },\n  'library': {\n    weight: 1.2\n  },\n  'bathroom': {\n    weight: 0.8\n  },\n  'utility': {\n    weight: 0.9\n  },\n  'prayer': {\n    weight: 0.8\n  },\n  'store': {\n    weight: 0.5\n  },\n  'hallway': {\n    weight: 0\n  },\n  'stairs': {\n    weight: 0\n  }\n};\n\n// 2. GEOMETRY ENGINE\nclass Rect {\n  constructor(x, y, w, h) {\n    this.x = x;\n    this.y = y;\n    this.w = w;\n    this.h = h;\n  }\n  get right() {\n    return this.x + this.w;\n  }\n  get bottom() {\n    return this.y + this.h;\n  }\n}\n\n// 3. AGENT IMPLEMENTATIONS\n\n// --- AGENT 1: ZONING ---\nconst ZoningAgent = async config => {\n  LOG('Zoning rooms...');\n  blackboard.write('config', config);\n  const pad = 4;\n  const buildW = config.width - pad * 2;\n  const buildD = config.depth - pad * 2;\n  blackboard.write('siteBoundary', new Rect(pad, pad, buildW, buildD));\n  const inventory = {\n    ...config.rooms\n  };\n  const floorPlans = Array.from({\n    length: config.floors\n  }, () => ({\n    clusters: []\n  }));\n  const assign = (fIdx, cluster) => {\n    const f = Math.min(fIdx, config.floors - 1);\n    floorPlans[f].clusters.push(cluster);\n  };\n\n  // 1. Master Suite\n  if (inventory.bedroom > 0) {\n    const cluster = {\n      type: 'SUITE',\n      main: 'master-bed',\n      subs: [],\n      id: 'master'\n    };\n    inventory.bedroom--;\n    if (inventory.bathroom > 0) {\n      cluster.subs.push('bathroom');\n      inventory.bathroom--;\n    }\n    assign(config.floors > 1 ? 1 : 0, cluster);\n  }\n\n  // 2. Standard Beds\n  let curF = config.floors > 1 ? 1 : 0;\n  while (inventory.bedroom > 0) {\n    const cluster = {\n      type: 'ROOM',\n      main: 'bedroom',\n      subs: [],\n      id: `bed-${inventory.bedroom}`\n    };\n    inventory.bedroom--;\n    if (inventory.bathroom > 0 && Math.random() > 0.5) {\n      cluster.type = 'SUITE';\n      cluster.subs.push('bathroom');\n      inventory.bathroom--;\n    }\n    assign(curF, cluster);\n    if (config.floors > 2 && curF < config.floors - 1) curF++;else if (config.floors > 1) curF = 1;\n  }\n\n  // 3. Ground Core\n  assign(0, {\n    type: 'ROOM',\n    main: 'kitchen',\n    subs: [],\n    id: 'kitchen'\n  });\n  if (inventory.dining > 0) assign(0, {\n    type: 'ROOM',\n    main: 'dining',\n    subs: [],\n    id: 'dining'\n  });\n  assign(0, {\n    type: 'ROOM',\n    main: 'living',\n    subs: [],\n    id: 'living'\n  });\n  if (inventory.garage > 0) assign(0, {\n    type: 'ROOM',\n    main: 'garage',\n    subs: [],\n    id: 'garage'\n  });\n\n  // 4. Extras\n  ['bathroom', 'utility', 'prayer', 'library', 'study', 'store'].forEach(type => {\n    while (inventory[type] > 0) {\n      assign(0, {\n        type: 'ROOM',\n        main: type,\n        subs: [],\n        id: `${type}-shared`\n      });\n      inventory[type]--;\n    }\n  });\n  blackboard.write('floorPlans', floorPlans);\n  return true;\n};\n\n// --- AGENT 2: LAYOUT SOLVER ---\n_c2 = ZoningAgent;\nconst LayoutAgent = async () => {\n  LOG('Calculating layout...');\n  const site = blackboard.read('siteBoundary');\n  const floorPlans = blackboard.read('floorPlans');\n  const config = blackboard.read('config');\n  const allFloorsRegions = [];\n  const SPINE_W = 6;\n  const SPINE_X = site.x + (site.w - SPINE_W) / 2;\n  floorPlans.forEach(plan => {\n    const regions = [];\n\n    // Spine\n    const hallRect = new Rect(SPINE_X, site.y + 6, SPINE_W, site.h - 10);\n    regions.push({\n      ...hallRect,\n      type: 'hallway'\n    });\n    if (config.floors > 1) {\n      regions.push({\n        x: SPINE_X,\n        y: hallRect.bottom - 10,\n        w: SPINE_W,\n        h: 10,\n        type: 'stairs'\n      });\n      hallRect.h -= 10;\n    }\n\n    // Wings\n    const leftWing = {\n      x: site.x,\n      y: site.y,\n      w: (site.w - SPINE_W) / 2,\n      h: site.h\n    };\n    const rightWing = {\n      x: SPINE_X + SPINE_W,\n      y: site.y,\n      w: (site.w - SPINE_W) / 2,\n      h: site.h\n    };\n\n    // Sort\n    const getScore = c => {\n      const name = c.main;\n      if (name.includes('kitchen') || name.includes('master')) return 0;\n      if (name.includes('dining') || name.includes('utility')) return 20;\n      if (name.includes('bed')) return 30;\n      if (name.includes('living')) return 80;\n      if (name.includes('garage')) return 90;\n      return 50;\n    };\n    plan.clusters.sort((a, b) => getScore(a) - getScore(b));\n    const leftC = [],\n      rightC = [];\n    plan.clusters.forEach(c => {\n      if (c.main === 'garage' || c.main === 'living') {\n        if (leftC.length <= rightC.length) leftC.push(c);else rightC.push(c);\n      } else if (c.main === 'kitchen') leftC.push(c);else if (c.main === 'dining') leftC.push(c);else {\n        if (leftC.length <= rightC.length) leftC.push(c);else rightC.push(c);\n      }\n    });\n    const stack = (wing, clusters, side) => {\n      if (clusters.length === 0) return;\n      const totalW = clusters.reduce((sum, c) => {\n        var _ROOM_SPECS$c$main;\n        return sum + (((_ROOM_SPECS$c$main = ROOM_SPECS[c.main]) === null || _ROOM_SPECS$c$main === void 0 ? void 0 : _ROOM_SPECS$c$main.weight) || 1);\n      }, 0);\n      let curY = wing.y;\n      clusters.forEach(c => {\n        const spec = ROOM_SPECS[c.main] || {\n          weight: 1\n        };\n        const h = spec.weight / totalW * wing.h;\n        const row = new Rect(wing.x, curY, wing.w, h);\n        if (c.type === 'SUITE' && c.subs.length > 0) {\n          const bathW = row.w * 0.35;\n          const bedW = row.w - bathW;\n          if (side === 'LEFT') {\n            regions.push({\n              x: row.x,\n              y: curY,\n              w: bathW,\n              h: h,\n              type: c.subs[0]\n            });\n            regions.push({\n              x: row.x + bathW,\n              y: curY,\n              w: bedW,\n              h: h,\n              type: c.main\n            });\n          } else {\n            regions.push({\n              x: row.x,\n              y: curY,\n              w: bedW,\n              h: h,\n              type: c.main\n            });\n            regions.push({\n              x: row.x + bedW,\n              y: curY,\n              w: bathW,\n              h: h,\n              type: c.subs[0]\n            });\n          }\n        } else {\n          regions.push({\n            ...row,\n            type: c.main\n          });\n        }\n        curY += h;\n      });\n    };\n    stack(leftWing, leftC, 'LEFT');\n    stack(rightWing, rightC, 'RIGHT');\n    allFloorsRegions.push(regions);\n  });\n  blackboard.write('floorRegions', allFloorsRegions);\n  return true;\n};\n\n// --- AGENT 3: STRUCTURAL ---\n_c3 = LayoutAgent;\nconst StructuralAgent = async () => {\n  LOG('Generating Walls...');\n  const floorRegions = blackboard.read('floorRegions');\n  const allWalls = [];\n  floorRegions.forEach(rooms => {\n    const walls = [];\n    rooms.forEach(r => {\n      walls.push({\n        x1: r.x,\n        y1: r.y,\n        x2: r.x + r.w,\n        y2: r.y,\n        type: 'inner'\n      });\n      walls.push({\n        x1: r.x,\n        y1: r.y + r.h,\n        x2: r.x + r.w,\n        y2: r.y + r.h,\n        type: 'inner'\n      });\n      walls.push({\n        x1: r.x,\n        y1: r.y,\n        x2: r.x,\n        y2: r.y + r.h,\n        type: 'inner'\n      });\n      walls.push({\n        x1: r.x + r.w,\n        y1: r.y,\n        x2: r.x + r.w,\n        y2: r.y + r.h,\n        type: 'inner'\n      });\n    });\n    const b = blackboard.read('siteBoundary');\n    const outer = [{\n      x1: b.x,\n      y1: b.y,\n      x2: b.x + b.w,\n      y2: b.y\n    }, {\n      x1: b.x,\n      y1: b.y + b.h,\n      x2: b.x + b.w,\n      y2: b.y + b.h\n    }, {\n      x1: b.x,\n      y1: b.y,\n      x2: b.x,\n      y2: b.y + b.h\n    }, {\n      x1: b.x + b.w,\n      y1: b.y,\n      x2: b.x + b.w,\n      y2: b.y + b.h\n    }];\n    allWalls.push({\n      inner: walls,\n      outer: outer\n    });\n  });\n  blackboard.write('floorWalls', allWalls);\n  return true;\n};\n\n// --- AGENT 4: CONNECTIVITY ---\n_c4 = StructuralAgent;\nconst ConnectivityAgent = async () => {\n  LOG('Placing Doors...');\n  const floorRegions = blackboard.read('floorRegions');\n  const allDoors = [];\n  floorRegions.forEach((rooms, fIdx) => {\n    const doors = [];\n    const add = d => {\n      if (!doors.some(x => Math.abs(x.x - d.x) < 1 && Math.abs(x.y - d.y) < 1)) doors.push(d);\n    };\n    rooms.forEach((r1, i) => {\n      rooms.forEach((r2, j) => {\n        if (i <= j) return;\n        const oX = Math.min(r1.right, r2.right) - Math.max(r1.x, r2.x);\n        const oY = Math.min(r1.bottom, r2.bottom) - Math.max(r1.y, r2.y);\n        const tX = Math.abs(r1.right - r2.x) < 0.1 || Math.abs(r2.right - r1.x) < 0.1;\n        const tY = Math.abs(r1.bottom - r2.y) < 0.1 || Math.abs(r2.bottom - r1.y) < 0.1;\n        const isHall = r1.type === 'hallway' || r2.type === 'hallway';\n        const isSuite = r1.type === 'bathroom' && r2.type.includes('bed') || r2.type === 'bathroom' && r1.type.includes('bed');\n        const isOpen = r1.type === 'living' && r2.type === 'dining' || r2.type === 'living' && r1.type === 'dining';\n        if (isHall || isSuite || isOpen) {\n          if (tX && oY > 3) add({\n            x: r1.x < r2.x ? r2.x : r1.x,\n            y: Math.max(r1.y, r2.y) + oY / 2 - 1.5,\n            w: 3,\n            vertical: true\n          });else if (tY && oX > 3) add({\n            x: Math.max(r1.x, r2.x) + oX / 2 - 1.5,\n            y: r1.y < r2.y ? r2.y : r1.y,\n            w: 3,\n            vertical: false\n          });\n        }\n      });\n    });\n    if (fIdx === 0) {\n      const h = rooms.find(r => r.type === 'hallway');\n      if (h) add({\n        x: h.x + h.w / 2 - 2,\n        y: h.bottom,\n        w: 4,\n        vertical: false,\n        type: 'main'\n      });\n    }\n    allDoors.push(doors);\n  });\n  blackboard.write('floorDoors', allDoors);\n  return true;\n};\n\n// --- AGENT 5: FURNITURE ---\n_c5 = ConnectivityAgent;\nconst FurnitureAgent = async () => {\n  LOG('Placing furniture...');\n  const floorRegions = blackboard.read('floorRegions');\n  const allFurniture = [];\n  floorRegions.forEach(rooms => {\n    const items = [];\n    rooms.forEach(r => {\n      const cx = r.x + r.w / 2;\n      const cy = r.y + r.h / 2;\n      if (r.type.includes('bed')) {\n        items.push({\n          type: 'bed',\n          x: cx - 3,\n          y: r.y + 2,\n          w: 6,\n          h: 7\n        });\n        items.push({\n          type: 'nightstand',\n          x: cx - 4.5,\n          y: r.y + 2\n        });\n        items.push({\n          type: 'nightstand',\n          x: cx + 3.5,\n          y: r.y + 2\n        });\n      } else if (r.type === 'living') {\n        items.push({\n          type: 'sofa',\n          x: cx - 4,\n          y: cy - 2,\n          w: 8,\n          h: 3\n        });\n        items.push({\n          type: 'table-coffee',\n          x: cx - 2.5,\n          y: cy + 1.5,\n          w: 5,\n          h: 2.5\n        });\n      } else if (r.type === 'dining') {\n        items.push({\n          type: 'table-dining',\n          x: cx - 3,\n          y: cy - 4,\n          w: 6,\n          h: 8\n        });\n      } else if (r.type === 'kitchen') {\n        items.push({\n          type: 'counter',\n          x: r.x,\n          y: r.y,\n          w: r.w,\n          h: 2\n        });\n        items.push({\n          type: 'counter',\n          x: r.x,\n          y: r.y,\n          w: 2,\n          h: r.h\n        });\n        items.push({\n          type: 'island',\n          x: cx - 2.5,\n          y: cy - 1.5,\n          w: 5,\n          h: 3\n        });\n      } else if (r.type === 'bathroom') {\n        items.push({\n          type: 'sink',\n          x: r.x + 1,\n          y: r.y + 1,\n          r: 1\n        });\n        items.push({\n          type: 'toilet',\n          x: r.right - 3,\n          y: r.y + 1,\n          w: 2,\n          h: 2.5\n        });\n      }\n    });\n    allFurniture.push(items);\n  });\n  blackboard.write('floorFurniture', allFurniture);\n  return true;\n};\n_c6 = FurnitureAgent;\nexport const agents = [{\n  name: 'Zoning & Logic',\n  fn: ZoningAgent\n}, {\n  name: 'Spine-Stacker',\n  fn: LayoutAgent\n}, {\n  name: 'Structural Walls',\n  fn: StructuralAgent\n}, {\n  name: 'Access Points',\n  fn: ConnectivityAgent\n}, {\n  name: 'Interior Design',\n  fn: FurnitureAgent\n}];\nvar _c, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"LOG\");\n$RefreshReg$(_c2, \"ZoningAgent\");\n$RefreshReg$(_c3, \"LayoutAgent\");\n$RefreshReg$(_c4, \"StructuralAgent\");\n$RefreshReg$(_c5, \"ConnectivityAgent\");\n$RefreshReg$(_c6, \"FurnitureAgent\");","map":{"version":3,"names":["blackboard","LOG","msg","console","log","_c","ROOM_SPECS","weight","Rect","constructor","x","y","w","h","right","bottom","ZoningAgent","config","write","pad","buildW","width","buildD","depth","inventory","rooms","floorPlans","Array","from","length","floors","clusters","assign","fIdx","cluster","f","Math","min","push","bedroom","type","main","subs","id","bathroom","curF","random","dining","garage","forEach","_c2","LayoutAgent","site","read","allFloorsRegions","SPINE_W","SPINE_X","plan","regions","hallRect","leftWing","rightWing","getScore","c","name","includes","sort","a","b","leftC","rightC","stack","wing","side","totalW","reduce","sum","_ROOM_SPECS$c$main","curY","spec","row","bathW","bedW","_c3","StructuralAgent","floorRegions","allWalls","walls","r","x1","y1","x2","y2","outer","inner","_c4","ConnectivityAgent","allDoors","doors","add","d","some","abs","r1","i","r2","j","oX","max","oY","tX","tY","isHall","isSuite","isOpen","vertical","find","_c5","FurnitureAgent","allFurniture","items","cx","cy","_c6","agents","fn","$RefreshReg$"],"sources":["E:/PAP/SEM 5  (Current)/Agent Based Software Engineering (ABSE)/Schematic-Architecture-Generator/ShamArchitectSys_Final/src/agents/AgentSystem.js"],"sourcesContent":["import { blackboard } from '../core/Blackboard';\n\n/**\n * ==================================================================================\n * SHAM ARCHITECT SYS - AESTHETIC GEN\n * ==================================================================================\n */\n\nconst LOG = (msg) => console.log(`[Architect Core] ${msg}`);\n\n// 1. KNOWLEDGE BASE\nconst ROOM_SPECS = {\n  'living':     { weight: 2.2, },\n  'dining':     { weight: 1.4, },\n  'garage':     { weight: 2.0, },\n  'kitchen':    { weight: 1.5, },\n  'master-bed': { weight: 1.8, },\n  'bedroom':    { weight: 1.3, },\n  'study':      { weight: 1.0, },\n  'library':    { weight: 1.2, },\n  'bathroom':   { weight: 0.8, },\n  'utility':    { weight: 0.9, },\n  'prayer':     { weight: 0.8, },\n  'store':      { weight: 0.5, },\n  'hallway':    { weight: 0,   },\n  'stairs':     { weight: 0,   }\n};\n\n// 2. GEOMETRY ENGINE\nclass Rect {\n  constructor(x, y, w, h) {\n    this.x = x; this.y = y; this.w = w; this.h = h;\n  }\n  get right() { return this.x + this.w; }\n  get bottom() { return this.y + this.h; }\n}\n\n// 3. AGENT IMPLEMENTATIONS\n\n// --- AGENT 1: ZONING ---\nconst ZoningAgent = async (config) => {\n  LOG('Zoning rooms...');\n  blackboard.write('config', config);\n\n  const pad = 4;\n  const buildW = config.width - (pad*2);\n  const buildD = config.depth - (pad*2);\n  blackboard.write('siteBoundary', new Rect(pad, pad, buildW, buildD));\n  \n  const inventory = { ...config.rooms };\n  const floorPlans = Array.from({ length: config.floors }, () => ({ clusters: [] }));\n\n  const assign = (fIdx, cluster) => {\n    const f = Math.min(fIdx, config.floors - 1);\n    floorPlans[f].clusters.push(cluster);\n  };\n\n  // 1. Master Suite\n  if (inventory.bedroom > 0) {\n    const cluster = { type: 'SUITE', main: 'master-bed', subs: [], id: 'master' };\n    inventory.bedroom--;\n    if (inventory.bathroom > 0) { cluster.subs.push('bathroom'); inventory.bathroom--; }\n    assign(config.floors > 1 ? 1 : 0, cluster);\n  }\n\n  // 2. Standard Beds\n  let curF = config.floors > 1 ? 1 : 0;\n  while (inventory.bedroom > 0) {\n    const cluster = { type: 'ROOM', main: 'bedroom', subs: [], id: `bed-${inventory.bedroom}` };\n    inventory.bedroom--;\n    if (inventory.bathroom > 0 && Math.random() > 0.5) {\n       cluster.type = 'SUITE'; cluster.subs.push('bathroom'); inventory.bathroom--;\n    }\n    assign(curF, cluster);\n    if (config.floors > 2 && curF < config.floors - 1) curF++;\n    else if (config.floors > 1) curF = 1;\n  }\n\n  // 3. Ground Core\n  assign(0, { type: 'ROOM', main: 'kitchen', subs: [], id: 'kitchen' });\n  if (inventory.dining > 0) assign(0, { type: 'ROOM', main: 'dining', subs: [], id: 'dining' });\n  assign(0, { type: 'ROOM', main: 'living', subs: [], id: 'living' });\n  if (inventory.garage > 0) assign(0, { type: 'ROOM', main: 'garage', subs: [], id: 'garage' });\n\n  // 4. Extras\n  ['bathroom', 'utility', 'prayer', 'library', 'study', 'store'].forEach(type => {\n    while (inventory[type] > 0) {\n      assign(0, { type: 'ROOM', main: type, subs: [], id: `${type}-shared` });\n      inventory[type]--;\n    }\n  });\n\n  blackboard.write('floorPlans', floorPlans);\n  return true;\n};\n\n// --- AGENT 2: LAYOUT SOLVER ---\nconst LayoutAgent = async () => {\n  LOG('Calculating layout...');\n  const site = blackboard.read('siteBoundary');\n  const floorPlans = blackboard.read('floorPlans');\n  const config = blackboard.read('config');\n  const allFloorsRegions = [];\n\n  const SPINE_W = 6;\n  const SPINE_X = site.x + (site.w - SPINE_W) / 2;\n\n  floorPlans.forEach((plan) => {\n    const regions = [];\n    \n    // Spine\n    const hallRect = new Rect(SPINE_X, site.y + 6, SPINE_W, site.h - 10);\n    regions.push({ ...hallRect, type: 'hallway' });\n    if (config.floors > 1) {\n       regions.push({ x: SPINE_X, y: hallRect.bottom - 10, w: SPINE_W, h: 10, type: 'stairs' });\n       hallRect.h -= 10;\n    }\n\n    // Wings\n    const leftWing = { x: site.x, y: site.y, w: (site.w - SPINE_W)/2, h: site.h };\n    const rightWing = { x: SPINE_X + SPINE_W, y: site.y, w: (site.w - SPINE_W)/2, h: site.h };\n\n    // Sort\n    const getScore = (c) => {\n       const name = c.main;\n       if (name.includes('kitchen') || name.includes('master')) return 0; \n       if (name.includes('dining') || name.includes('utility')) return 20;\n       if (name.includes('bed')) return 30;\n       if (name.includes('living')) return 80;\n       if (name.includes('garage')) return 90; \n       return 50;\n    };\n    plan.clusters.sort((a,b) => getScore(a) - getScore(b));\n\n    const leftC = [], rightC = [];\n    plan.clusters.forEach(c => {\n      if (c.main === 'garage' || c.main === 'living') { \n         if(leftC.length <= rightC.length) leftC.push(c); else rightC.push(c);\n      }\n      else if (c.main === 'kitchen') leftC.push(c); \n      else if (c.main === 'dining') leftC.push(c);\n      else {\n         if (leftC.length <= rightC.length) leftC.push(c); else rightC.push(c);\n      }\n    });\n\n    const stack = (wing, clusters, side) => {\n       if (clusters.length === 0) return;\n       const totalW = clusters.reduce((sum, c) => sum + (ROOM_SPECS[c.main]?.weight || 1), 0);\n       let curY = wing.y;\n\n       clusters.forEach(c => {\n          const spec = ROOM_SPECS[c.main] || { weight: 1 };\n          const h = (spec.weight / totalW) * wing.h;\n          const row = new Rect(wing.x, curY, wing.w, h);\n          \n          if (c.type === 'SUITE' && c.subs.length > 0) {\n             const bathW = row.w * 0.35; const bedW = row.w - bathW;\n             if (side === 'LEFT') {\n                regions.push({ x: row.x, y: curY, w: bathW, h: h, type: c.subs[0] });\n                regions.push({ x: row.x + bathW, y: curY, w: bedW, h: h, type: c.main });\n             } else {\n                regions.push({ x: row.x, y: curY, w: bedW, h: h, type: c.main });\n                regions.push({ x: row.x + bedW, y: curY, w: bathW, h: h, type: c.subs[0] });\n             }\n          } else {\n             regions.push({ ...row, type: c.main });\n          }\n          curY += h;\n       });\n    };\n\n    stack(leftWing, leftC, 'LEFT');\n    stack(rightWing, rightC, 'RIGHT');\n    allFloorsRegions.push(regions);\n  });\n\n  blackboard.write('floorRegions', allFloorsRegions);\n  return true;\n};\n\n// --- AGENT 3: STRUCTURAL ---\nconst StructuralAgent = async () => {\n  LOG('Generating Walls...');\n  const floorRegions = blackboard.read('floorRegions');\n  const allWalls = [];\n  floorRegions.forEach((rooms) => {\n    const walls = [];\n    rooms.forEach(r => {\n      walls.push({ x1: r.x, y1: r.y, x2: r.x+r.w, y2: r.y, type: 'inner' });\n      walls.push({ x1: r.x, y1: r.y+r.h, x2: r.x+r.w, y2: r.y+r.h, type: 'inner' });\n      walls.push({ x1: r.x, y1: r.y, x2: r.x, y2: r.y+r.h, type: 'inner' });\n      walls.push({ x1: r.x+r.w, y1: r.y, x2: r.x+r.w, y2: r.y+r.h, type: 'inner' });\n    });\n    const b = blackboard.read('siteBoundary');\n    const outer = [\n      { x1: b.x, y1: b.y, x2: b.x+b.w, y2: b.y },\n      { x1: b.x, y1: b.y+b.h, x2: b.x+b.w, y2: b.y+b.h },\n      { x1: b.x, y1: b.y, x2: b.x, y2: b.y+b.h },\n      { x1: b.x+b.w, y1: b.y, x2: b.x+b.w, y2: b.y+b.h },\n    ];\n    allWalls.push({ inner: walls, outer: outer });\n  });\n  blackboard.write('floorWalls', allWalls);\n  return true;\n};\n\n// --- AGENT 4: CONNECTIVITY ---\nconst ConnectivityAgent = async () => {\n  LOG('Placing Doors...');\n  const floorRegions = blackboard.read('floorRegions');\n  const allDoors = [];\n  floorRegions.forEach((rooms, fIdx) => {\n    const doors = [];\n    const add = (d) => { if(!doors.some(x=>Math.abs(x.x-d.x)<1 && Math.abs(x.y-d.y)<1)) doors.push(d); };\n\n    rooms.forEach((r1, i) => {\n      rooms.forEach((r2, j) => {\n        if(i<=j) return;\n        const oX = (Math.min(r1.right, r2.right) - Math.max(r1.x, r2.x));\n        const oY = (Math.min(r1.bottom, r2.bottom) - Math.max(r1.y, r2.y));\n        const tX = Math.abs(r1.right - r2.x) < 0.1 || Math.abs(r2.right - r1.x) < 0.1;\n        const tY = Math.abs(r1.bottom - r2.y) < 0.1 || Math.abs(r2.bottom - r1.y) < 0.1;\n\n        const isHall = r1.type === 'hallway' || r2.type === 'hallway';\n        const isSuite = (r1.type==='bathroom' && r2.type.includes('bed')) || (r2.type==='bathroom' && r1.type.includes('bed'));\n        const isOpen = (r1.type==='living' && r2.type==='dining') || (r2.type==='living' && r1.type==='dining');\n\n        if(isHall || isSuite || isOpen) {\n           if(tX && oY > 3) add({x: (r1.x<r2.x?r2.x:r1.x), y: Math.max(r1.y,r2.y)+oY/2-1.5, w:3, vertical:true});\n           else if(tY && oX > 3) add({x: Math.max(r1.x,r2.x)+oX/2-1.5, y: (r1.y<r2.y?r2.y:r1.y), w:3, vertical:false});\n        }\n      });\n    });\n    if(fIdx===0) {\n       const h = rooms.find(r=>r.type==='hallway');\n       if(h) add({x: h.x+h.w/2-2, y: h.bottom, w:4, vertical:false, type:'main'});\n    }\n    allDoors.push(doors);\n  });\n  blackboard.write('floorDoors', allDoors);\n  return true;\n};\n\n// --- AGENT 5: FURNITURE ---\nconst FurnitureAgent = async () => {\n  LOG('Placing furniture...');\n  const floorRegions = blackboard.read('floorRegions');\n  const allFurniture = [];\n\n  floorRegions.forEach(rooms => {\n    const items = [];\n    rooms.forEach(r => {\n       const cx = r.x + r.w/2;\n       const cy = r.y + r.h/2;\n       if (r.type.includes('bed')) {\n          items.push({ type: 'bed', x: cx-3, y: r.y+2, w: 6, h: 7 });\n          items.push({ type: 'nightstand', x: cx-4.5, y: r.y+2 });\n          items.push({ type: 'nightstand', x: cx+3.5, y: r.y+2 });\n       }\n       else if (r.type === 'living') {\n          items.push({ type: 'sofa', x: cx-4, y: cy-2, w: 8, h: 3 });\n          items.push({ type: 'table-coffee', x: cx-2.5, y: cy+1.5, w: 5, h: 2.5 });\n       }\n       else if (r.type === 'dining') {\n          items.push({ type: 'table-dining', x: cx-3, y: cy-4, w: 6, h: 8 });\n       }\n       else if (r.type === 'kitchen') {\n          items.push({ type: 'counter', x: r.x, y: r.y, w: r.w, h: 2 }); \n          items.push({ type: 'counter', x: r.x, y: r.y, w: 2, h: r.h });\n          items.push({ type: 'island', x: cx-2.5, y: cy-1.5, w: 5, h: 3 });\n       }\n       else if (r.type === 'bathroom') {\n          items.push({ type: 'sink', x: r.x+1, y: r.y+1, r: 1 });\n          items.push({ type: 'toilet', x: r.right-3, y: r.y+1, w: 2, h: 2.5 });\n       }\n    });\n    allFurniture.push(items);\n  });\n  blackboard.write('floorFurniture', allFurniture);\n  return true;\n};\n\nexport const agents = [\n  { name: 'Zoning & Logic', fn: ZoningAgent },\n  { name: 'Spine-Stacker', fn: LayoutAgent },\n  { name: 'Structural Walls', fn: StructuralAgent },\n  { name: 'Access Points', fn: ConnectivityAgent },\n  { name: 'Interior Design', fn: FurnitureAgent },\n];"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}