{"ast":null,"code":"import { blackboard } from '../core/Blackboard';\nconst LOG = msg => console.log(`[System] ${msg}`);\n\n// --- 0. ARCHITECTURAL KNOWLEDGE BASE ---\n\n// 1. Sizing Weights (Relative to a standard 1.0 unit)\n_c = LOG;\nconst ROOM_WEIGHTS = {\n  'garage': 1.5,\n  'living': 1.6,\n  'dining': 1.0,\n  'kitchen': 1.1,\n  'master-bed': 1.4,\n  'bedroom': 1.0,\n  'library': 0.9,\n  'study': 0.8,\n  'bathroom': 0.5,\n  // Much smaller\n  'prayer': 0.7,\n  'utility': 0.6,\n  'store': 0.4\n};\n\n// 2. Privacy/Zoning Score (0 = Back/Private, 100 = Front/Public)\n// We fill from Top (y=0) to Bottom. So Low Score = Top of Sheet.\nconst ZONING_SCORE = {\n  'utility': 5,\n  // Back alley access\n  'kitchen': 10,\n  // Back of house\n  'dining': 15,\n  'study': 20,\n  'library': 20,\n  'master-bed': 30,\n  // Private\n  'bedroom': 35,\n  'bathroom': 36,\n  // Keep near bedrooms\n  'prayer': 40,\n  'stairs': 50,\n  // Central\n  'living': 80,\n  // Front facing\n  'garage': 90,\n  // Street facing\n  'hallway': 50\n};\n\n// --- AGENTS ---\n\n// 1. Requirement Agent (Distributes Rooms across Floors)\nconst RequirementAgent = async config => {\n  LOG('Analyzing room inventory with zoning rules...');\n  const pad = 4;\n  const buildW = config.width - pad * 2;\n  const buildD = config.depth - pad * 2;\n  blackboard.write('config', config);\n  blackboard.write('siteBoundary', {\n    x: pad,\n    y: pad,\n    w: buildW,\n    h: buildD\n  });\n\n  // Create Arrays for floors\n  const floorQueues = Array.from({\n    length: config.floors\n  }, () => []);\n  const rooms = {\n    ...config.rooms\n  };\n\n  // Helper: Smart Allocate\n  const addToFloor = (f, type) => {\n    const target = f < config.floors ? f : config.floors - 1;\n    floorQueues[target].push(type);\n  };\n\n  // --- FLOOR 0: Public & Service ---\n  if (rooms.garage > 0) {\n    addToFloor(0, 'garage');\n    rooms.garage--;\n  }\n  if (rooms.kitchen > 0) {\n    addToFloor(0, 'kitchen');\n    rooms.kitchen--;\n  }\n  if (rooms.dining > 0) {\n    addToFloor(0, 'dining');\n    rooms.dining--;\n  }\n  if (rooms.living > 0) {\n    addToFloor(0, 'living');\n    rooms.living--;\n  }\n  if (rooms.utility > 0) {\n    addToFloor(0, 'utility');\n    rooms.utility--;\n  }\n  if (rooms.prayer > 0) {\n    addToFloor(0, 'prayer');\n    rooms.prayer--;\n  }\n\n  // Guest Bath on Ground\n  if (rooms.bathroom > 0) {\n    addToFloor(0, 'bathroom');\n    rooms.bathroom--;\n  }\n\n  // --- UPPER FLOORS: Private Sleeping Quarters ---\n  let currentFloor = config.floors > 1 ? 1 : 0;\n\n  // Master Suite (Highest Priority for Privacy)\n  if (rooms.bedroom > 0) {\n    addToFloor(currentFloor, 'master-bed'); // Upgrade first bed to Master\n    rooms.bedroom--;\n    // Give Master an ensuite if possible\n    if (rooms.bathroom > 0) {\n      addToFloor(currentFloor, 'bathroom');\n      rooms.bathroom--;\n    }\n  }\n\n  // Remaining Beds & Baths\n  while (rooms.bedroom > 0) {\n    addToFloor(currentFloor, 'bedroom');\n    rooms.bedroom--;\n\n    // Distribute remaining baths close to beds\n    if (rooms.bathroom > 0) {\n      addToFloor(currentFloor, 'bathroom');\n      rooms.bathroom--;\n    }\n\n    // Cycle floors if building tall\n    if (config.floors > 2 && currentFloor < config.floors - 1) currentFloor++;else if (config.floors > 1) currentFloor = 1;\n  }\n\n  // Library/Office (Quiet Zones)\n  while (rooms.library > 0) {\n    addToFloor(config.floors > 1 ? 1 : 0, 'library');\n    rooms.library--;\n  }\n  blackboard.write('floorQueues', floorQueues);\n  return true;\n};\n\n// 2. Advanced Layout Agent (Sizing & Adjacency)\n_c2 = RequirementAgent;\nconst LayoutAgent = async () => {\n  LOG('Calculating weighted floor plates...');\n  const bounds = blackboard.read('siteBoundary');\n  const floorQueues = blackboard.read('floorQueues');\n  const config = blackboard.read('config');\n  const allFloorsRegions = [];\n\n  // 1. Define Central Spine\n  const spineW = 6;\n  const spineX = bounds.x + bounds.w / 2 - spineW / 2;\n  for (let f = 0; f < config.floors; f++) {\n    const regions = [];\n    let rooms = floorQueues[f] || [];\n\n    // 2. Fixed Elements\n    const hall = {\n      x: spineX,\n      y: bounds.y + 8,\n      w: spineW,\n      h: bounds.h - 12,\n      type: 'hallway'\n    };\n    regions.push(hall);\n    if (config.floors > 1) {\n      regions.push({\n        x: hall.x,\n        y: hall.y + hall.h - 10,\n        w: hall.w,\n        h: 8,\n        type: 'stairs'\n      });\n    }\n\n    // 3. Define Sides\n    const leftSpace = {\n      x: bounds.x,\n      y: bounds.y,\n      w: bounds.w / 2 - spineW / 2,\n      h: bounds.h\n    };\n    const rightSpace = {\n      x: spineX + spineW,\n      y: bounds.y,\n      w: bounds.w / 2 - spineW / 2,\n      h: bounds.h\n    };\n\n    // 4. Weighted Slicer Function\n    const weightedSlice = (rect, roomsToPlace) => {\n      if (roomsToPlace.length === 0) return;\n\n      // A. Sort by Zoning (Back to Front)\n      // This puts Kitchens/Beds at top (Back) and Living/Garage at bottom (Front)\n      roomsToPlace.sort((a, b) => (ZONING_SCORE[a] || 50) - (ZONING_SCORE[b] || 50));\n\n      // B. Adjacency Optimization (Cluster Bathrooms next to Beds)\n      // Simple Swap Pass: If we see [Bed, Living, Bath], swap to [Bed, Bath, Living]\n      for (let i = 0; i < roomsToPlace.length - 1; i++) {\n        if (roomsToPlace[i].includes('bed') && roomsToPlace[i + 1] !== 'bathroom') {\n          // Look ahead for a bath\n          const bathIdx = roomsToPlace.findIndex((r, idx) => idx > i && r === 'bathroom');\n          if (bathIdx !== -1) {\n            // Pull bath to be next to bed\n            const bath = roomsToPlace.splice(bathIdx, 1)[0];\n            roomsToPlace.splice(i + 1, 0, bath);\n          }\n        }\n      }\n\n      // C. Calculate Weights\n      const totalWeight = roomsToPlace.reduce((sum, r) => sum + (ROOM_WEIGHTS[r] || 1.0), 0);\n      let currentY = rect.y;\n      roomsToPlace.forEach(rType => {\n        const weight = ROOM_WEIGHTS[rType] || 1.0;\n        const roomHeight = weight / totalWeight * rect.h;\n        regions.push({\n          x: rect.x,\n          y: currentY,\n          w: rect.w,\n          h: roomHeight,\n          type: rType\n        });\n        currentY += roomHeight;\n      });\n    };\n\n    // 5. Assign Rooms to Sides (Heuristics)\n    const leftRooms = [];\n    const rightRooms = [];\n    rooms.forEach(r => {\n      // Functional Side (Right): Garage, Kitchen, Utility, Dining\n      if (['garage', 'kitchen', 'dining', 'utility', 'prayer'].includes(r)) rightRooms.push(r);\n      // Living Side (Left): Bedrooms, Living, Library\n      else leftRooms.push(r);\n    });\n\n    // Balance check: If one side is empty, move items\n    if (leftRooms.length === 0 && rightRooms.length > 1) leftRooms.push(rightRooms.pop());\n    if (rightRooms.length === 0 && leftRooms.length > 1) rightRooms.push(leftRooms.pop());\n    weightedSlice(leftSpace, leftRooms);\n    weightedSlice(rightSpace, rightRooms);\n    allFloorsRegions.push(regions);\n  }\n  blackboard.write('floorRegions', allFloorsRegions);\n  return true;\n};\n\n// 3. Structural Agent (Same as before)\n_c3 = LayoutAgent;\nconst StructuralAgent = async () => {\n  LOG('Aligning load-bearing walls...');\n  const floorRegions = blackboard.read('floorRegions');\n  const allWalls = [];\n  floorRegions.forEach(rooms => {\n    const walls = [];\n    rooms.forEach(r => {\n      walls.push({\n        x1: r.x,\n        y1: r.y,\n        x2: r.x + r.w,\n        y2: r.y,\n        type: 'inner'\n      });\n      walls.push({\n        x1: r.x,\n        y1: r.y + r.h,\n        x2: r.x + r.w,\n        y2: r.y + r.h,\n        type: 'inner'\n      });\n      walls.push({\n        x1: r.x,\n        y1: r.y,\n        x2: r.x,\n        y2: r.y + r.h,\n        type: 'inner'\n      });\n      walls.push({\n        x1: r.x + r.w,\n        y1: r.y,\n        x2: r.x + r.w,\n        y2: r.y + r.h,\n        type: 'inner'\n      });\n    });\n    const b = blackboard.read('siteBoundary');\n    const outer = [{\n      x1: b.x,\n      y1: b.y,\n      x2: b.x + b.w,\n      y2: b.y\n    }, {\n      x1: b.x,\n      y1: b.y + b.h,\n      x2: b.x + b.w,\n      y2: b.y + b.h\n    }, {\n      x1: b.x,\n      y1: b.y,\n      x2: b.x,\n      y2: b.y + b.h\n    }, {\n      x1: b.x + b.w,\n      y1: b.y,\n      x2: b.x + b.w,\n      y2: b.y + b.h\n    }];\n    allWalls.push({\n      inner: walls,\n      outer: outer\n    });\n  });\n  blackboard.write('floorWalls', allWalls);\n  return true;\n};\n\n// 4. Connectivity Agent (Same as before)\n_c4 = StructuralAgent;\nconst ConnectivityAgent = async () => {\n  LOG('Calculating egress paths...');\n  const floorRegions = blackboard.read('floorRegions');\n  const allDoors = [];\n  floorRegions.forEach((rooms, floorIndex) => {\n    const doors = [];\n    for (let i = 0; i < rooms.length; i++) {\n      for (let j = i + 1; j < rooms.length; j++) {\n        const r1 = rooms[i];\n        const r2 = rooms[j];\n        const isHall = r1.type === 'hallway' || r2.type === 'hallway';\n        const verticalOverlap = r1.x < r2.x + r2.w && r1.x + r1.w > r2.x;\n        const horizontalOverlap = r1.y < r2.y + r2.h && r1.y + r1.h > r2.y;\n        const touchingY = Math.abs(r1.y + r1.h - r2.y) < 0.1 || Math.abs(r2.y + r2.h - r1.y) < 0.1;\n        const touchingX = Math.abs(r1.x + r1.w - r2.x) < 0.1 || Math.abs(r2.x + r2.w - r1.x) < 0.1;\n        if (isHall && verticalOverlap && touchingY) {\n          const mid = (Math.max(r1.x, r2.x) + Math.min(r1.x + r1.w, r2.x + r2.w)) / 2;\n          doors.push({\n            x: mid - 1.5,\n            y: Math.abs(r1.y + r1.h - r2.y) < 0.1 ? r2.y : r1.y,\n            w: 3,\n            vertical: false\n          });\n        } else if (isHall && horizontalOverlap && touchingX) {\n          const mid = (Math.max(r1.y, r2.y) + Math.min(r1.y + r1.h, r2.y + r2.h)) / 2;\n          doors.push({\n            x: Math.abs(r1.x + r1.w - r2.x) < 0.1 ? r2.x : r1.x,\n            y: mid - 1.5,\n            w: 3,\n            vertical: true\n          });\n        }\n      }\n    }\n    if (floorIndex === 0) {\n      const hall = rooms.find(r => r.type === 'hallway');\n      if (hall) doors.push({\n        x: hall.x + hall.w / 2 - 2,\n        y: hall.y + hall.h,\n        w: 4,\n        vertical: false,\n        type: 'main'\n      });\n    }\n    allDoors.push(doors);\n  });\n  blackboard.write('floorDoors', allDoors);\n  return true;\n};\n_c5 = ConnectivityAgent;\nexport const agents = [{\n  name: 'Multi-Floor Allocator',\n  fn: RequirementAgent\n}, {\n  name: 'Vertical Layout Engine',\n  fn: LayoutAgent\n}, {\n  name: 'Structural Logic',\n  fn: StructuralAgent\n}, {\n  name: 'Access Grapher',\n  fn: ConnectivityAgent\n}];\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"LOG\");\n$RefreshReg$(_c2, \"RequirementAgent\");\n$RefreshReg$(_c3, \"LayoutAgent\");\n$RefreshReg$(_c4, \"StructuralAgent\");\n$RefreshReg$(_c5, \"ConnectivityAgent\");","map":{"version":3,"names":["blackboard","LOG","msg","console","log","_c","ROOM_WEIGHTS","ZONING_SCORE","RequirementAgent","config","pad","buildW","width","buildD","depth","write","x","y","w","h","floorQueues","Array","from","length","floors","rooms","addToFloor","f","type","target","push","garage","kitchen","dining","living","utility","prayer","bathroom","currentFloor","bedroom","library","_c2","LayoutAgent","bounds","read","allFloorsRegions","spineW","spineX","regions","hall","leftSpace","rightSpace","weightedSlice","rect","roomsToPlace","sort","a","b","i","includes","bathIdx","findIndex","r","idx","bath","splice","totalWeight","reduce","sum","currentY","forEach","rType","weight","roomHeight","leftRooms","rightRooms","pop","_c3","StructuralAgent","floorRegions","allWalls","walls","x1","y1","x2","y2","outer","inner","_c4","ConnectivityAgent","allDoors","floorIndex","doors","j","r1","r2","isHall","verticalOverlap","horizontalOverlap","touchingY","Math","abs","touchingX","mid","max","min","vertical","find","_c5","agents","name","fn","$RefreshReg$"],"sources":["E:/PAP/SEM 5  (Current)/Agent Based Software Engineering (ABSE)/Schematic-Architecture-Generator/ShamArchitectSys_Final/src/agents/AgentSystem.js"],"sourcesContent":["import { blackboard } from '../core/Blackboard';\n\nconst LOG = (msg) => console.log(`[System] ${msg}`);\n\n// --- 0. ARCHITECTURAL KNOWLEDGE BASE ---\n\n// 1. Sizing Weights (Relative to a standard 1.0 unit)\nconst ROOM_WEIGHTS = {\n  'garage': 1.5,\n  'living': 1.6,\n  'dining': 1.0,\n  'kitchen': 1.1,\n  'master-bed': 1.4,\n  'bedroom': 1.0,\n  'library': 0.9,\n  'study': 0.8,\n  'bathroom': 0.5, // Much smaller\n  'prayer': 0.7,\n  'utility': 0.6,\n  'store': 0.4\n};\n\n// 2. Privacy/Zoning Score (0 = Back/Private, 100 = Front/Public)\n// We fill from Top (y=0) to Bottom. So Low Score = Top of Sheet.\nconst ZONING_SCORE = {\n  'utility': 5,      // Back alley access\n  'kitchen': 10,     // Back of house\n  'dining': 15,\n  'study': 20,\n  'library': 20,\n  'master-bed': 30,  // Private\n  'bedroom': 35,\n  'bathroom': 36,    // Keep near bedrooms\n  'prayer': 40,\n  'stairs': 50,      // Central\n  'living': 80,      // Front facing\n  'garage': 90,      // Street facing\n  'hallway': 50\n};\n\n// --- AGENTS ---\n\n// 1. Requirement Agent (Distributes Rooms across Floors)\nconst RequirementAgent = async (config) => {\n  LOG('Analyzing room inventory with zoning rules...');\n  \n  const pad = 4;\n  const buildW = config.width - (pad*2);\n  const buildD = config.depth - (pad*2);\n\n  blackboard.write('config', config);\n  blackboard.write('siteBoundary', { x: pad, y: pad, w: buildW, h: buildD });\n  \n  // Create Arrays for floors\n  const floorQueues = Array.from({ length: config.floors }, () => []);\n  const rooms = { ...config.rooms };\n  \n  // Helper: Smart Allocate\n  const addToFloor = (f, type) => {\n    const target = (f < config.floors) ? f : config.floors - 1;\n    floorQueues[target].push(type);\n  };\n\n  // --- FLOOR 0: Public & Service ---\n  if (rooms.garage > 0) { addToFloor(0, 'garage'); rooms.garage--; }\n  if (rooms.kitchen > 0) { addToFloor(0, 'kitchen'); rooms.kitchen--; }\n  if (rooms.dining > 0) { addToFloor(0, 'dining'); rooms.dining--; }\n  if (rooms.living > 0) { addToFloor(0, 'living'); rooms.living--; }\n  if (rooms.utility > 0) { addToFloor(0, 'utility'); rooms.utility--; }\n  if (rooms.prayer > 0) { addToFloor(0, 'prayer'); rooms.prayer--; }\n  \n  // Guest Bath on Ground\n  if (rooms.bathroom > 0) { addToFloor(0, 'bathroom'); rooms.bathroom--; }\n\n  // --- UPPER FLOORS: Private Sleeping Quarters ---\n  let currentFloor = config.floors > 1 ? 1 : 0;\n\n  // Master Suite (Highest Priority for Privacy)\n  if (rooms.bedroom > 0) {\n    addToFloor(currentFloor, 'master-bed'); // Upgrade first bed to Master\n    rooms.bedroom--;\n    // Give Master an ensuite if possible\n    if (rooms.bathroom > 0) {\n      addToFloor(currentFloor, 'bathroom');\n      rooms.bathroom--;\n    }\n  }\n\n  // Remaining Beds & Baths\n  while (rooms.bedroom > 0) {\n    addToFloor(currentFloor, 'bedroom');\n    rooms.bedroom--;\n    \n    // Distribute remaining baths close to beds\n    if (rooms.bathroom > 0) {\n      addToFloor(currentFloor, 'bathroom');\n      rooms.bathroom--;\n    }\n\n    // Cycle floors if building tall\n    if (config.floors > 2 && currentFloor < config.floors - 1) currentFloor++;\n    else if (config.floors > 1) currentFloor = 1;\n  }\n\n  // Library/Office (Quiet Zones)\n  while (rooms.library > 0) {\n    addToFloor(config.floors > 1 ? 1 : 0, 'library');\n    rooms.library--;\n  }\n\n  blackboard.write('floorQueues', floorQueues);\n  return true;\n};\n\n// 2. Advanced Layout Agent (Sizing & Adjacency)\nconst LayoutAgent = async () => {\n  LOG('Calculating weighted floor plates...');\n  const bounds = blackboard.read('siteBoundary');\n  const floorQueues = blackboard.read('floorQueues');\n  const config = blackboard.read('config');\n\n  const allFloorsRegions = [];\n\n  // 1. Define Central Spine\n  const spineW = 6;\n  const spineX = bounds.x + (bounds.w/2) - (spineW/2);\n  \n  for (let f = 0; f < config.floors; f++) {\n    const regions = [];\n    let rooms = floorQueues[f] || [];\n\n    // 2. Fixed Elements\n    const hall = { x: spineX, y: bounds.y + 8, w: spineW, h: bounds.h - 12, type: 'hallway' };\n    regions.push(hall);\n\n    if (config.floors > 1) {\n      regions.push({ x: hall.x, y: hall.y + hall.h - 10, w: hall.w, h: 8, type: 'stairs' });\n    }\n\n    // 3. Define Sides\n    const leftSpace = { x: bounds.x, y: bounds.y, w: (bounds.w/2) - (spineW/2), h: bounds.h };\n    const rightSpace = { x: spineX + spineW, y: bounds.y, w: (bounds.w/2) - (spineW/2), h: bounds.h };\n\n    // 4. Weighted Slicer Function\n    const weightedSlice = (rect, roomsToPlace) => {\n      if (roomsToPlace.length === 0) return;\n\n      // A. Sort by Zoning (Back to Front)\n      // This puts Kitchens/Beds at top (Back) and Living/Garage at bottom (Front)\n      roomsToPlace.sort((a, b) => (ZONING_SCORE[a] || 50) - (ZONING_SCORE[b] || 50));\n\n      // B. Adjacency Optimization (Cluster Bathrooms next to Beds)\n      // Simple Swap Pass: If we see [Bed, Living, Bath], swap to [Bed, Bath, Living]\n      for(let i=0; i<roomsToPlace.length-1; i++) {\n         if(roomsToPlace[i].includes('bed') && roomsToPlace[i+1] !== 'bathroom') {\n             // Look ahead for a bath\n             const bathIdx = roomsToPlace.findIndex((r, idx) => idx > i && r === 'bathroom');\n             if(bathIdx !== -1) {\n                 // Pull bath to be next to bed\n                 const bath = roomsToPlace.splice(bathIdx, 1)[0];\n                 roomsToPlace.splice(i+1, 0, bath);\n             }\n         }\n      }\n\n      // C. Calculate Weights\n      const totalWeight = roomsToPlace.reduce((sum, r) => sum + (ROOM_WEIGHTS[r] || 1.0), 0);\n      \n      let currentY = rect.y;\n      \n      roomsToPlace.forEach((rType) => {\n        const weight = ROOM_WEIGHTS[rType] || 1.0;\n        const roomHeight = (weight / totalWeight) * rect.h;\n        \n        regions.push({ \n          x: rect.x, y: currentY, \n          w: rect.w, h: roomHeight, \n          type: rType \n        });\n        currentY += roomHeight;\n      });\n    };\n\n    // 5. Assign Rooms to Sides (Heuristics)\n    const leftRooms = [];\n    const rightRooms = [];\n    \n    rooms.forEach(r => {\n      // Functional Side (Right): Garage, Kitchen, Utility, Dining\n      if(['garage','kitchen','dining','utility','prayer'].includes(r)) rightRooms.push(r);\n      // Living Side (Left): Bedrooms, Living, Library\n      else leftRooms.push(r);\n    });\n\n    // Balance check: If one side is empty, move items\n    if(leftRooms.length === 0 && rightRooms.length > 1) leftRooms.push(rightRooms.pop());\n    if(rightRooms.length === 0 && leftRooms.length > 1) rightRooms.push(leftRooms.pop());\n\n    weightedSlice(leftSpace, leftRooms);\n    weightedSlice(rightSpace, rightRooms);\n    \n    allFloorsRegions.push(regions);\n  }\n\n  blackboard.write('floorRegions', allFloorsRegions);\n  return true;\n};\n\n// 3. Structural Agent (Same as before)\nconst StructuralAgent = async () => {\n  LOG('Aligning load-bearing walls...');\n  const floorRegions = blackboard.read('floorRegions');\n  const allWalls = [];\n\n  floorRegions.forEach((rooms) => {\n    const walls = [];\n    rooms.forEach(r => {\n      walls.push({ x1: r.x, y1: r.y, x2: r.x+r.w, y2: r.y, type: 'inner' });\n      walls.push({ x1: r.x, y1: r.y+r.h, x2: r.x+r.w, y2: r.y+r.h, type: 'inner' });\n      walls.push({ x1: r.x, y1: r.y, x2: r.x, y2: r.y+r.h, type: 'inner' });\n      walls.push({ x1: r.x+r.w, y1: r.y, x2: r.x+r.w, y2: r.y+r.h, type: 'inner' });\n    });\n    \n    const b = blackboard.read('siteBoundary');\n    const outer = [\n      { x1: b.x, y1: b.y, x2: b.x+b.w, y2: b.y },\n      { x1: b.x, y1: b.y+b.h, x2: b.x+b.w, y2: b.y+b.h },\n      { x1: b.x, y1: b.y, x2: b.x, y2: b.y+b.h },\n      { x1: b.x+b.w, y1: b.y, x2: b.x+b.w, y2: b.y+b.h },\n    ];\n    allWalls.push({ inner: walls, outer: outer });\n  });\n\n  blackboard.write('floorWalls', allWalls);\n  return true;\n};\n\n// 4. Connectivity Agent (Same as before)\nconst ConnectivityAgent = async () => {\n  LOG('Calculating egress paths...');\n  const floorRegions = blackboard.read('floorRegions');\n  const allDoors = [];\n\n  floorRegions.forEach((rooms, floorIndex) => {\n    const doors = [];\n    for (let i = 0; i < rooms.length; i++) {\n      for (let j = i + 1; j < rooms.length; j++) {\n        const r1 = rooms[i];\n        const r2 = rooms[j];\n        \n        const isHall = r1.type === 'hallway' || r2.type === 'hallway';\n        const verticalOverlap = (r1.x < r2.x + r2.w && r1.x + r1.w > r2.x);\n        const horizontalOverlap = (r1.y < r2.y + r2.h && r1.y + r1.h > r2.y);\n        const touchingY = Math.abs(r1.y + r1.h - r2.y) < 0.1 || Math.abs(r2.y + r2.h - r1.y) < 0.1;\n        const touchingX = Math.abs(r1.x + r1.w - r2.x) < 0.1 || Math.abs(r2.x + r2.w - r1.x) < 0.1;\n\n        if (isHall && (verticalOverlap && touchingY)) {\n             const mid = (Math.max(r1.x, r2.x) + Math.min(r1.x+r1.w, r2.x+r2.w)) / 2;\n             doors.push({ x: mid - 1.5, y: (Math.abs(r1.y+r1.h - r2.y) < 0.1 ? r2.y : r1.y), w: 3, vertical: false });\n        } else if (isHall && (horizontalOverlap && touchingX)) {\n             const mid = (Math.max(r1.y, r2.y) + Math.min(r1.y+r1.h, r2.y+r2.h)) / 2;\n             doors.push({ x: (Math.abs(r1.x+r1.w - r2.x) < 0.1 ? r2.x : r1.x), y: mid - 1.5, w: 3, vertical: true });\n        }\n      }\n    }\n    if (floorIndex === 0) {\n      const hall = rooms.find(r => r.type === 'hallway');\n      if(hall) doors.push({ x: hall.x + (hall.w/2) - 2, y: hall.y + hall.h, w: 4, vertical: false, type: 'main' });\n    }\n    allDoors.push(doors);\n  });\n\n  blackboard.write('floorDoors', allDoors);\n  return true;\n};\n\nexport const agents = [\n  { name: 'Multi-Floor Allocator', fn: RequirementAgent },\n  { name: 'Vertical Layout Engine', fn: LayoutAgent },\n  { name: 'Structural Logic', fn: StructuralAgent },\n  { name: 'Access Grapher', fn: ConnectivityAgent },\n];"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}